/**
 * @file Reports.ts
 * @description Módulo de generación de reportes. Permite generar, visualizar
 *              y exportar reportes de nómina y otros informes del sistema.
 * @author Equipo de Desarrollo
 * @date 2025
 * @module Reportes
 */
//Arreglo de funciones
const fn = {
    SearchListPayrollProcess: function (_payrollId) {
        $.ajax({
            url: `/reportes/${_payrollId}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".payrollprocessid").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".payrollprocessid").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.PayCycleFormat);
                        option.val(this.PayrollProcessId);
                        $(".payrollprocessid").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    },
    SearchListEmployee: function (_payrollProcessid) {
        $.ajax({
            url: `/reportes/payrollprocessid/${_payrollProcessid}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".employee-id-select").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".employee-id-select").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.EmployeeName);
                        option.val(this.EmployeeId);
                        $(".employee-id-select").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    },
    SearchListEmployeeforDepartment: function (_departmentId, _payrollProcessid) {
        $.ajax({
            url: `/reportes/payrollprocessid/${_payrollProcessid}/${_departmentId}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".employee-id-select").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".employee-id-select").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.EmployeeName);
                        option.val(this.EmployeeId);
                        $(".employee-id-select").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    }
};
escuchadores: {
    $('#Payrolls').on('change', function () {
        if ($(this).val() != "") {
            fn.SearchListPayrollProcess($(this).val().toString());
        }
    });
    $('#Department').on('change', function () {
        if ($(this).val() != "") {
            fn.SearchListEmployeeforDepartment($(this).val().toString(), $(".payrollprocessid").val().toString());
        }
    });
    $('.payrollprocessid').on('change', function () {
        if ($(this).val() != "") {
            $("#Department").val("");
            fn.SearchListEmployee($(this).val().toString());
        }
    });
    $("#update-report").on("click", function () {
        var datatype = $(this).attr("data-type");
        $('.progreso').removeClass("collapse");
        if (datatype == "payroll-payments") {
            var employeeId = $('.employee-id-select').val() == null ? "" : $('.employee-id-select').val().toString();
            $.get(`/reportes/pagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}&employeeId=${employeeId}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
                $("#SendEmailReport").submit(function (e) {
                    if ($(this).valid()) {
                        e.preventDefault();
                        var datatype = $("#update-report").attr("data-type");
                        if (datatype == "payroll-payments") {
                            var employeeId = $('.employee-id-select').val() == null ? "" : $('.employee-id-select').val().toString();
                            /*      $('.progreso').modal({ backdrop: 'static', keyboard: false })*/
                            $.ajax({
                                url: `/reportes/email/pagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}&employeeId=${employeeId}`,
                                type: "POST",
                                data: $("#SendEmailReport").serialize(),
                                async: true,
                                success: function (data) {
                                    if (data.Type == "error") {
                                        /* $('.progreso').modal('hide');*/
                                        FormatErrors(data);
                                    }
                                    else {
                                        /*$('.progreso').modal('hide');*/
                                    }
                                }, error: function (xhr) {
                                    redireccionaralLogin(xhr);
                                }
                            });
                        }
                    }
                });
            });
        }
        if (datatype == "report-all-employee") {
            $.get(`/reportes/reporteempleados?deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "payroll-payments-summary") {
            $.get(`/reportes/resumenpagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "payroll-report") {
            $.get(`/reportes/reportenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "tss-report") {
            let period = $(".period").val().toString();
            console.log($(".type-tss").val().toString());
            $.get(`/reportes/tss?payrollid=${$("#Payrolls").val().toString()}&year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typetss=${$(".type-tss").val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt4-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt4?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt2-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt2?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt3-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt3?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt5-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt5?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt9-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt9?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt12-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt12?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
    });
    $(".generar-txt").on("click", function () {
        let period = $(".period").val().toString();
        let payrollid = $("#Payrolls").val();
        if ($('.period').val() != "") {
            if (payrollid == undefined)
                window.open(`/reportes/Txt?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typeDTG=${$('.Type-dgt').val().toString()}`, '_blank');
            else
                window.open(`/reportes/Txt?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typeDTG=${$('.Type-dgt').val().toString()}&payrollid=${payrollid.toString()}&typetss=${$(".type-tss").val().toString()}`, '_blank');
        }
        else {
            windows_message("¡Debe seleccionar un período!", "error");
        }
    });
    //exportar a excel
    $('.exportarExcel').on('click', function () {
        window.open(`/reportes/ExportarPayroll?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`, '_blank');
    });
}
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVwb3J0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL1R5cGVTY3JpcHRGaWxlL1JlcG9ydHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7R0FPRztBQUVILHNCQUFzQjtBQUN0QixNQUFNLEVBQUUsR0FBRztJQUNQLHdCQUF3QixFQUFFLFVBQVUsVUFBa0I7UUFDbEQsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNILEdBQUcsRUFBRSxhQUFhLFVBQVUsRUFBRTtZQUM5QixJQUFJLEVBQUUsS0FBSztZQUNYLEtBQUssRUFBRSxLQUFLO1lBQ1osT0FBTyxFQUFFLFVBQVUsSUFBSTtnQkFDbkIsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ2xCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2YsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUN0QyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUVULElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7d0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO3dCQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO3dCQUNsQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLENBQUMs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QUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBRUQsSUFBSSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7WUFDNUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBR0QsSUFBSSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7WUFDNUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBQ0QsSUFBSSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7WUFDNUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBRUQsSUFBSSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7WUFDNUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBRUQsSUFBSSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7WUFDNUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO1FBR0QsSUFBSSxRQUFRLElBQUksY0FBYyxFQUFFLENBQUM7WUFDN0IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsd0JBQXdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzVFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNBLENBQUM7UUFDVixDQUFDO0lBS0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRTtRQUMxQixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDM0MsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRXJDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDO1lBQzNCLElBQUksU0FBUyxJQUFJLFNBQVM7Z0JBQ3RCLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFBOztnQkFFMUksTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxjQUFjLFNBQVMsQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQTtRQUUvTixDQUFDO2FBQU0sQ0FBQztZQUNKLGVBQWUsQ0FBQywrQkFBK0IsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM5RCxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxrQkFBa0I7SUFDbEIsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRTtRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLDhDQUE4QyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3BLLENBQUMsQ0FBQyxDQUFDO0FBRVAsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAZmlsZSBSZXBvcnRzLnRzXHJcbiAqIEBkZXNjcmlwdGlvbiBNw7NkdWxvIGRlIGdlbmVyYWNpw7NuIGRlIHJlcG9ydGVzLiBQZXJtaXRlIGdlbmVyYXIsIHZpc3VhbGl6YXJcclxuICogICAgICAgICAgICAgIHkgZXhwb3J0YXIgcmVwb3J0ZXMgZGUgbsOzbWluYSB5IG90cm9zIGluZm9ybWVzIGRlbCBzaXN0ZW1hLlxyXG4gKiBAYXV0aG9yIEVxdWlwbyBkZSBEZXNhcnJvbGxvXHJcbiAqIEBkYXRlIDIwMjVcclxuICogQG1vZHVsZSBSZXBvcnRlc1xyXG4gKi9cclxuXHJcbi8vQXJyZWdsbyBkZSBmdW5jaW9uZXNcclxuY29uc3QgZm4gPSB7XHJcbiAgICBTZWFyY2hMaXN0UGF5cm9sbFByb2Nlc3M6IGZ1bmN0aW9uIChfcGF5cm9sbElkOiBzdHJpbmcpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGAvcmVwb3J0ZXMvJHtfcGF5cm9sbElkfWAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR2V0XCIsXHJcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQoXCJTZWxlY2Npb25lLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0KHRoaXMuUGF5Q3ljbGVGb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsKHRoaXMuUGF5cm9sbFByb2Nlc3NJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS5hcHBlbmQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgIHJlZGlyZWNjaW9uYXJhbExvZ2luKHhocik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIFNlYXJjaExpc3RFbXBsb3llZTogZnVuY3Rpb24gKF9wYXlyb2xsUHJvY2Vzc2lkOiBzdHJpbmcpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGAvcmVwb3J0ZXMvcGF5cm9sbHByb2Nlc3NpZC8ke19wYXlyb2xsUHJvY2Vzc2lkfWAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR2V0XCIsXHJcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICQoXCIuZW1wbG95ZWUtaWQtc2VsZWN0XCIpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dChcIlNlbGVjY2lvbmUuLi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmVtcGxveWVlLWlkLXNlbGVjdFwiKS5hcHBlbmQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGRhdGEpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0KHRoaXMuRW1wbG95ZWVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbCh0aGlzLkVtcGxveWVlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmVtcGxveWVlLWlkLXNlbGVjdFwiKS5hcHBlbmQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgIHJlZGlyZWNjaW9uYXJhbExvZ2luKHhocik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIFNlYXJjaExpc3RFbXBsb3llZWZvckRlcGFydG1lbnQ6IGZ1bmN0aW9uIChfZGVwYXJ0bWVudElkOiBzdHJpbmcsIF9wYXlyb2xsUHJvY2Vzc2lkOiBzdHJpbmcpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGAvcmVwb3J0ZXMvcGF5cm9sbHByb2Nlc3NpZC8ke19wYXlyb2xsUHJvY2Vzc2lkfS8ke19kZXBhcnRtZW50SWR9YCxcclxuICAgICAgICAgICAgdHlwZTogXCJHZXRcIixcclxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5lbXBsb3llZS1pZC1zZWxlY3RcIikuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0KFwiU2VsZWNjaW9uZS4uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuZW1wbG95ZWUtaWQtc2VsZWN0XCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQodGhpcy5FbXBsb3llZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsKHRoaXMuRW1wbG95ZWVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZW1wbG95ZWUtaWQtc2VsZWN0XCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikge1xyXG4gICAgICAgICAgICAgICAgcmVkaXJlY2Npb25hcmFsTG9naW4oeGhyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5lc2N1Y2hhZG9yZXM6IHtcclxuICAgICQoJyNQYXlyb2xscycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBmbi5TZWFyY2hMaXN0UGF5cm9sbFByb2Nlc3MoJCh0aGlzKS52YWwoKS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjRGVwYXJ0bWVudCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBmbi5TZWFyY2hMaXN0RW1wbG95ZWVmb3JEZXBhcnRtZW50KCQodGhpcykudmFsKCkudG9TdHJpbmcoKSwgJChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLnZhbCgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5wYXlyb2xscHJvY2Vzc2lkJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICQoXCIjRGVwYXJ0bWVudFwiKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgIGZuLlNlYXJjaExpc3RFbXBsb3llZSgkKHRoaXMpLnZhbCgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjdXBkYXRlLXJlcG9ydFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YXR5cGUgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXR5cGVcIik7XHJcbiAgICAgICAgJCgnLnByb2dyZXNvJykucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKTtcclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJwYXlyb2xsLXBheW1lbnRzXCIpIHtcclxuICAgICAgICAgICAgdmFyIGVtcGxveWVlSWQ6IHN0cmluZyA9ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKSA9PSBudWxsID8gXCJcIiA6ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAkLmdldChgL3JlcG9ydGVzL3BhZ29zZGVub21pbmE/cGF5cm9sbHByb2Nlc3NpZD0keyQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS52YWwoKS50b1N0cmluZygpfSZkZXBhcm1lbnRJZD0keyQoJyNEZXBhcnRtZW50JykudmFsKCkudG9TdHJpbmcoKX0mZW1wbG95ZWVJZD0ke2VtcGxveWVlSWR9YClcclxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RvbSA9ICQocik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnKS5yZXBsYWNlV2l0aCgkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcsIG5ld0RvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzbycpLmFkZENsYXNzKFwiY29sbGFwc2VcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjU2VuZEVtYWlsUmVwb3J0XCIpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGF0eXBlID0gJChcIiN1cGRhdGUtcmVwb3J0XCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGF0eXBlID09IFwicGF5cm9sbC1wYXltZW50c1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtcGxveWVlSWQ6IHN0cmluZyA9ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKSA9PSBudWxsID8gXCJcIiA6ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8qICAgICAgJCgnLnByb2dyZXNvJykubW9kYWwoeyBiYWNrZHJvcDogJ3N0YXRpYycsIGtleWJvYXJkOiBmYWxzZSB9KSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgL3JlcG9ydGVzL2VtYWlsL3BhZ29zZGVub21pbmE/cGF5cm9sbHByb2Nlc3NpZD0keyQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS52YWwoKS50b1N0cmluZygpfSZkZXBhcm1lbnRJZD0keyQoJyNEZXBhcnRtZW50JykudmFsKCkudG9TdHJpbmcoKX0mZW1wbG95ZWVJZD0ke2VtcGxveWVlSWR9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICQoXCIjU2VuZEVtYWlsUmVwb3J0XCIpLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGE6IFJlc3BvbnNlVUkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLlR5cGUgPT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAkKCcucHJvZ3Jlc28nKS5tb2RhbCgnaGlkZScpOyovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybWF0RXJyb3JzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiQoJy5wcm9ncmVzbycpLm1vZGFsKCdoaWRlJyk7Ki9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWNjaW9uYXJhbExvZ2luKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJyZXBvcnQtYWxsLWVtcGxveWVlXCIpIHtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy9yZXBvcnRlZW1wbGVhZG9zP2RlcGFybWVudElkPSR7JCgnI0RlcGFydG1lbnQnKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJwYXlyb2xsLXBheW1lbnRzLXN1bW1hcnlcIikge1xyXG4gICAgICAgICAgICAkLmdldChgL3JlcG9ydGVzL3Jlc3VtZW5wYWdvc2Rlbm9taW5hP3BheXJvbGxwcm9jZXNzaWQ9JHskKFwiLnBheXJvbGxwcm9jZXNzaWRcIikudmFsKCkudG9TdHJpbmcoKX0mZGVwYXJtZW50SWQ9JHskKCcjRGVwYXJ0bWVudCcpLnZhbCgpLnRvU3RyaW5nKCl9YClcclxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RvbSA9ICQocik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnKS5yZXBsYWNlV2l0aCgkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcsIG5ld0RvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzbycpLmFkZENsYXNzKFwiY29sbGFwc2VcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJwYXlyb2xsLXJlcG9ydFwiKSB7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvcmVwb3J0ZW5vbWluYT9wYXlyb2xscHJvY2Vzc2lkPSR7JChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLnZhbCgpLnRvU3RyaW5nKCl9JmRlcGFybWVudElkPSR7JCgnI0RlcGFydG1lbnQnKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcInRzcy1yZXBvcnRcIikge1xyXG4gICAgICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJChcIi50eXBlLXRzc1wiKS52YWwoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy90c3M/cGF5cm9sbGlkPSR7JChcIiNQYXlyb2xsc1wiKS52YWwoKS50b1N0cmluZygpfSZ5ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfSZ0eXBldHNzPSR7JChcIi50eXBlLXRzc1wiKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDQtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0ND95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJkZ3QyLXJlcG9ydFwiKSB7XHJcbiAgICAgICAgICAgIGxldCBwZXJpb2QgPSAkKFwiLnBlcmlvZFwiKS52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAkLmdldChgL3JlcG9ydGVzL2RndDI/eWVhcj0ke3BlcmlvZC5zdWJzdHIoMCwgNCl9Jm1vbnRoPSR7cGVyaW9kLnN1YnN0cig1LCAyKX1gKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RG9tID0gJChyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcpLnJlcGxhY2VXaXRoKCQoJy5jb250LWdlbmVyYWwtcmVwb3J0JywgbmV3RG9tKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNvJykuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDMtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0Mz95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDUtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0NT95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDktcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0OT95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJkZ3QxMi1yZXBvcnRcIikge1xyXG4gICAgICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy9kZ3QxMj95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5nZW5lcmFyLXR4dFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgcGF5cm9sbGlkID0gJChcIiNQYXlyb2xsc1wiKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKCQoJy5wZXJpb2QnKS52YWwoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXlyb2xsaWQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oYC9yZXBvcnRlcy9UeHQ/eWVhcj0ke3BlcmlvZC5zdWJzdHIoMCwgNCl9Jm1vbnRoPSR7cGVyaW9kLnN1YnN0cig1LCAyKX0mdHlwZURURz0keyQoJy5UeXBlLWRndCcpLnZhbCgpLnRvU3RyaW5nKCl9YCwgJ19ibGFuaycpXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGAvcmVwb3J0ZXMvVHh0P3llYXI9JHtwZXJpb2Quc3Vic3RyKDAsIDQpfSZtb250aD0ke3BlcmlvZC5zdWJzdHIoNSwgMil9JnR5cGVEVEc9JHskKCcuVHlwZS1kZ3QnKS52YWwoKS50b1N0cmluZygpfSZwYXlyb2xsaWQ9JHtwYXlyb2xsaWQudG9TdHJpbmcoKX0mdHlwZXRzcz0keyQoXCIudHlwZS10c3NcIikudmFsKCkudG9TdHJpbmcoKX1gLCAnX2JsYW5rJylcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93c19tZXNzYWdlKFwiwqFEZWJlIHNlbGVjY2lvbmFyIHVuIHBlcsOtb2RvIVwiLCBcImVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vZXhwb3J0YXIgYSBleGNlbFxyXG4gICAgJCgnLmV4cG9ydGFyRXhjZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93Lm9wZW4oYC9yZXBvcnRlcy9FeHBvcnRhclBheXJvbGw/cGF5cm9sbHByb2Nlc3NpZD0keyQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS52YWwoKS50b1N0cmluZygpfSZkZXBhcm1lbnRJZD0keyQoJyNEZXBhcnRtZW50JykudmFsKCkudG9TdHJpbmcoKX1gLCAnX2JsYW5rJyk7XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IH0iXX0=