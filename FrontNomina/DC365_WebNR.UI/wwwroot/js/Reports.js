/**
 * @file Reports.ts
 * @description Módulo de generación de reportes. Permite generar, visualizar
 *              y exportar reportes de nómina y otros informes del sistema.
 * @author Equipo de Desarrollo
 * @date 2025
 * @module Reportes
 */
//Arreglo de funciones
const fn = {
    SearchListPayrollProcess: function (_payrollId) {
        $.ajax({
            url: `/reportes/${_payrollId}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".payrollprocessid").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".payrollprocessid").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.PayCycleFormat);
                        option.val(this.PayrollProcessId);
                        $(".payrollprocessid").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    },
    SearchListEmployee: function (_payrollProcessid) {
        $.ajax({
            url: `/reportes/payrollprocessid/${_payrollProcessid}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".employee-id-select").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".employee-id-select").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.EmployeeName);
                        option.val(this.EmployeeId);
                        $(".employee-id-select").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    },
    SearchListEmployeeforDepartment: function (_departmentId, _payrollProcessid) {
        $.ajax({
            url: `/reportes/payrollprocessid/${_payrollProcessid}/${_departmentId}`,
            type: "Get",
            async: false,
            success: function (data) {
                $(".employee-id-select").html('');
                if (data.length > 0) {
                    var option = $(document.createElement('option'));
                    option.text("Seleccione...");
                    option.val("");
                    $(".employee-id-select").append(option);
                    $(data).each(function () {
                        var option = $(document.createElement('option'));
                        option.text(this.EmployeeName);
                        option.val(this.EmployeeId);
                        $(".employee-id-select").append(option);
                    });
                }
            }, error: function (xhr) {
                redireccionaralLogin(xhr);
            }
        });
    }
};
escuchadores: {
    $('#Payrolls').on('change', function () {
        if ($(this).val() != "") {
            fn.SearchListPayrollProcess($(this).val().toString());
        }
    });
    $('#Department').on('change', function () {
        if ($(this).val() != "") {
            fn.SearchListEmployeeforDepartment($(this).val().toString(), $(".payrollprocessid").val().toString());
        }
    });
    $('.payrollprocessid').on('change', function () {
        if ($(this).val() != "") {
            $("#Department").val("");
            fn.SearchListEmployee($(this).val().toString());
        }
    });
    $("#update-report").on("click", function () {
        var datatype = $(this).attr("data-type");
        $('.progreso').removeClass("collapse");
        if (datatype == "payroll-payments") {
            var employeeId = $('.employee-id-select').val() == null ? "" : $('.employee-id-select').val().toString();
            $.get(`/reportes/pagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}&employeeId=${employeeId}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
                $("#SendEmailReport").submit(function (e) {
                    e.preventDefault(); // Siempre prevenir el envío nativo del formulario
                    if ($(this).valid()) {
                        var datatype = $("#update-report").attr("data-type");
                        if (datatype == "payroll-payments") {
                            var employeeId = $('.employee-id-select').val() == null ? "" : $('.employee-id-select').val().toString();
                            /*      $('.progreso').modal({ backdrop: 'static', keyboard: false })*/
                            $.ajax({
                                url: `/reportes/email/pagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}&employeeId=${employeeId}`,
                                type: "POST",
                                data: $("#SendEmailReport").serialize(),
                                async: true,
                                success: function (data) {
                                    if (data.Type == "error") {
                                        /* $('.progreso').modal('hide');*/
                                        FormatErrors(data);
                                    }
                                    else {
                                        /*$('.progreso').modal('hide');*/
                                    }
                                }, error: function (xhr) {
                                    redireccionaralLogin(xhr);
                                }
                            });
                        }
                    }
                });
            });
        }
        if (datatype == "report-all-employee") {
            $.get(`/reportes/reporteempleados?deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "payroll-payments-summary") {
            $.get(`/reportes/resumenpagosdenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "payroll-report") {
            $.get(`/reportes/reportenomina?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "tss-report") {
            let period = $(".period").val().toString();
            console.log($(".type-tss").val().toString());
            $.get(`/reportes/tss?payrollid=${$("#Payrolls").val().toString()}&year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typetss=${$(".type-tss").val().toString()}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt4-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt4?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt2-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt2?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt3-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt3?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt5-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt5?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt9-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt9?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
        if (datatype == "dgt12-report") {
            let period = $(".period").val().toString();
            $.get(`/reportes/dgt12?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}`)
                .done(function (r) {
                var newDom = $(r);
                $('.cont-general-report').replaceWith($('.cont-general-report', newDom));
                $('.progreso').addClass("collapse");
            });
        }
    });
    $(".generar-txt").on("click", function () {
        let period = $(".period").val().toString();
        let payrollid = $("#Payrolls").val();
        if ($('.period').val() != "") {
            if (payrollid == undefined)
                window.open(`/reportes/Txt?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typeDTG=${$('.Type-dgt').val().toString()}`, '_blank');
            else
                window.open(`/reportes/Txt?year=${period.substr(0, 4)}&month=${period.substr(5, 2)}&typeDTG=${$('.Type-dgt').val().toString()}&payrollid=${payrollid.toString()}&typetss=${$(".type-tss").val().toString()}`, '_blank');
        }
        else {
            windows_message("¡Debe seleccionar un período!", "error");
        }
    });
    //exportar a excel
    $('.exportarExcel').on('click', function () {
        window.open(`/reportes/ExportarPayroll?payrollprocessid=${$(".payrollprocessid").val().toString()}&deparmentId=${$('#Department').val().toString()}`, '_blank');
    });
}
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVwb3J0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL1R5cGVTY3JpcHRGaWxlL1JlcG9ydHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7R0FPRztBQUVILHNCQUFzQjtBQUN0QixNQUFNLEVBQUUsR0FBRztJQUNQLHdCQUF3QixFQUFFLFVBQVUsVUFBa0I7UUFDbEQsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNILEdBQUcsRUFBRSxhQUFhLFVBQVUsRUFBRTtZQUM5QixJQUFJLEVBQUUsS0FBSztZQUNYLEtBQUssRUFBRSxLQUFLO1lBQ1osT0FBTyxFQUFFLFVBQVUsSUFBSTtnQkFDbkIsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ2xCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2YsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUN0QyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUVULElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7d0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO3dCQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO3dCQUNsQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQzFDLENBQUMsQ0FBQyxDQUFDO2dCQUNQLENBQUM7WUFDTCxDQUFDLEVBQUUsS0FBSyxFQUFFLFVBQVUsR0FBRztnQkFDbkIsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDOUIsQ0FBQztTQUVKLENBQUMsQ0FBQztJQUVQLENBQUM7SUFDRCxrQkFBa0IsRUFBRSxVQUFVLGlCQUF5QjtRQUNuRCxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ0gsR0FBRyxFQUFFLDhCQUE4QixpQkFBaUIsRUFBRTtZQUN0RCxJQUFJLEVBQUUsS0FBSztZQUNYLEtBQUssRUFBRSxLQUFLO1lBQ1osT0FBTyxFQUFFLFVBQVUsSUFBSTtnQkFDbkIsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ2xCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2YsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUN4QyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUNULElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7d0JBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO3dCQUMvQixNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDNUIsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUM1QyxDQUFDLENBQUMsQ0FBQztnQkFDUCxDQUFDO1lBQ0wsQ0FBQyxFQUFFLEtBQUssRUFBRSxVQUFVLEdBQUc7Z0JBQ25CLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlCLENBQUM7U0FFSixDQUFDLENBQUM7SUFFUCxDQUFDO0lBQ0QsK0JBQStCLEVBQUUsVUFBVSxhQUFxQixFQUFFLGlCQUF5QjtRQUN2RixDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ0gsR0FBRyxFQUFFLDhCQUE4QixpQkFBaUIsSUFBSSxhQUFhLEVBQUU7WUFDdkUsSUFBSSxFQUFFLEtBQUs7WUFDWCxLQUFLLEVBQUUsS0FBSztZQUNaLE9BQU8sRUFBRSxVQUFVLElBQUk7Z0JBQ25CLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDbEMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUNsQixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO29CQUM3QixNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUNmLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDeEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFDVCxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO3dCQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQzt3QkFDL0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7d0JBQzVCLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDNUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsQ0FBQztZQUNMLENBQUMsRUFBRSxLQUFLLEVBQUUsVUFBVSxHQUFHO2dCQUNuQixvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QixDQUFDO1NBRUosQ0FBQyxDQUFDO0lBRVAsQ0FBQztDQUVKLENBQUE7QUFFRCxZQUFZLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFO1FBQ3hCLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDO1lBQ3RCLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUMxRCxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUMxQixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQztZQUN0QixFQUFFLENBQUMsK0JBQStCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDMUcsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUNoQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQztZQUN0QixDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNwRCxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFO1FBQzVCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxJQUFJLFFBQVEsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO1lBQ2pDLElBQUksVUFBVSxHQUFXLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNqSCxDQUFDLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZUFBZSxVQUFVLEVBQUUsQ0FBQztpQkFDakssSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFFcEMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztvQkFDcEQsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsa0RBQWtEO29CQUN0RSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDO3dCQUVGLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQzt3QkFFckQsSUFBSSxRQUFRLElBQUksa0JBQWtCLEVBQUUsQ0FBQzs0QkFDakMsSUFBSSxVQUFVLEdBQVcsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDOzRCQUN2SCx1RUFBdUU7NEJBQ2pFLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0NBQ0gsR0FBRyxFQUFFLGtEQUFrRCxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZUFBZSxVQUFVLEVBQUU7Z0NBQzFLLElBQUksRUFBRSxNQUFNO2dDQUNaLElBQUksRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxTQUFTLEVBQUU7Z0NBQ3ZDLEtBQUssRUFBRSxJQUFJO2dDQUNYLE9BQU8sRUFBRSxVQUFVLElBQWdCO29DQUMvQixJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxFQUFFLENBQUM7d0NBQ3hCLGtDQUFrQzt3Q0FDakMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO29DQUN2QixDQUFDO3lDQUFNLENBQUM7d0NBQ0osaUNBQWlDO29DQUNyQyxDQUFDO2dDQUNMLENBQUMsRUFBRSxLQUFLLEVBQUUsVUFBVSxHQUFHO29DQUNuQixvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQ0FDOUIsQ0FBQzs2QkFDSixDQUFDLENBQUM7d0JBQ1AsQ0FBQztvQkFDTCxDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQyxDQUFDLENBQUM7UUFFWCxDQUFDO1FBQ0QsSUFBSSxRQUFRLElBQUkscUJBQXFCLEVBQUUsQ0FBQztZQUNwQyxDQUFDLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQztpQkFDL0UsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDLENBQUMsQ0FBQztRQUVYLENBQUM7UUFDRCxJQUFJLFFBQVEsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxHQUFHLENBQUMsbURBQW1ELENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7aUJBQy9JLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUFDLENBQUM7UUFFWCxDQUFDO1FBRUQsSUFBSSxRQUFRLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztZQUMvQixDQUFDLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDO2lCQUN4SSxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUNiLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEIsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUN6RSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsQ0FDQSxDQUFDO1FBQ1YsQ0FBQztRQUVELElBQUksUUFBUSxJQUFJLFlBQVksRUFBRSxDQUFDO1lBQzNCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMzQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQzdDLENBQUMsQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQztpQkFDbEssSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDLENBQ0EsQ0FBQztRQUNWLENBQUM7UUFFRCxJQUFJLFFBQVEsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDM0MsQ0FBQyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztpQkFDM0UsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDLENBQ0EsQ0FBQztRQUNWLENBQUM7UUFHRCxJQUFJLFFBQVEsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDM0MsQ0FBQyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztpQkFDM0UsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDLENBQ0EsQ0FBQztRQUNWLENBQUM7UUFDRCxJQUFJLFFBQVEsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDM0MsQ0FBQyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztpQkFDM0UsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDYixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDekUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDLENBQ0EsQ0FBQztRQUNWLENBQUM7UUFFRCxJQUFJLFFBQVEsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxF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QUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUE7O2dCQUUxSSxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLGNBQWMsU0FBUyxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFBO1FBRS9OLENBQUM7YUFBTSxDQUFDO1lBQ0osZUFBZSxDQUFDLCtCQUErQixFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzlELENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILGtCQUFrQjtJQUNsQixDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFO1FBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsOENBQThDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDcEssQ0FBQyxDQUFDLENBQUM7QUFFUCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBmaWxlIFJlcG9ydHMudHNcclxuICogQGRlc2NyaXB0aW9uIE3Ds2R1bG8gZGUgZ2VuZXJhY2nDs24gZGUgcmVwb3J0ZXMuIFBlcm1pdGUgZ2VuZXJhciwgdmlzdWFsaXphclxyXG4gKiAgICAgICAgICAgICAgeSBleHBvcnRhciByZXBvcnRlcyBkZSBuw7NtaW5hIHkgb3Ryb3MgaW5mb3JtZXMgZGVsIHNpc3RlbWEuXHJcbiAqIEBhdXRob3IgRXF1aXBvIGRlIERlc2Fycm9sbG9cclxuICogQGRhdGUgMjAyNVxyXG4gKiBAbW9kdWxlIFJlcG9ydGVzXHJcbiAqL1xyXG5cclxuLy9BcnJlZ2xvIGRlIGZ1bmNpb25lc1xyXG5jb25zdCBmbiA9IHtcclxuICAgIFNlYXJjaExpc3RQYXlyb2xsUHJvY2VzczogZnVuY3Rpb24gKF9wYXlyb2xsSWQ6IHN0cmluZykge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogYC9yZXBvcnRlcy8ke19wYXlyb2xsSWR9YCxcclxuICAgICAgICAgICAgdHlwZTogXCJHZXRcIixcclxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dChcIlNlbGVjY2lvbmUuLi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLnBheXJvbGxwcm9jZXNzaWRcIikuYXBwZW5kKG9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQodGhpcy5QYXlDeWNsZUZvcm1hdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWwodGhpcy5QYXlyb2xsUHJvY2Vzc0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikge1xyXG4gICAgICAgICAgICAgICAgcmVkaXJlY2Npb25hcmFsTG9naW4oeGhyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgU2VhcmNoTGlzdEVtcGxveWVlOiBmdW5jdGlvbiAoX3BheXJvbGxQcm9jZXNzaWQ6IHN0cmluZykge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogYC9yZXBvcnRlcy9wYXlyb2xscHJvY2Vzc2lkLyR7X3BheXJvbGxQcm9jZXNzaWR9YCxcclxuICAgICAgICAgICAgdHlwZTogXCJHZXRcIixcclxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5lbXBsb3llZS1pZC1zZWxlY3RcIikuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0KFwiU2VsZWNjaW9uZS4uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuZW1wbG95ZWUtaWQtc2VsZWN0XCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQodGhpcy5FbXBsb3llZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsKHRoaXMuRW1wbG95ZWVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZW1wbG95ZWUtaWQtc2VsZWN0XCIpLmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKHhocikge1xyXG4gICAgICAgICAgICAgICAgcmVkaXJlY2Npb25hcmFsTG9naW4oeGhyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgU2VhcmNoTGlzdEVtcGxveWVlZm9yRGVwYXJ0bWVudDogZnVuY3Rpb24gKF9kZXBhcnRtZW50SWQ6IHN0cmluZywgX3BheXJvbGxQcm9jZXNzaWQ6IHN0cmluZykge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogYC9yZXBvcnRlcy9wYXlyb2xscHJvY2Vzc2lkLyR7X3BheXJvbGxQcm9jZXNzaWR9LyR7X2RlcGFydG1lbnRJZH1gLFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdldFwiLFxyXG4gICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmVtcGxveWVlLWlkLXNlbGVjdFwiKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQoXCJTZWxlY2Npb25lLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5lbXBsb3llZS1pZC1zZWxlY3RcIikuYXBwZW5kKG9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCh0aGlzLkVtcGxveWVlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWwodGhpcy5FbXBsb3llZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5lbXBsb3llZS1pZC1zZWxlY3RcIikuYXBwZW5kKG9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgICByZWRpcmVjY2lvbmFyYWxMb2dpbih4aHIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmVzY3VjaGFkb3Jlczoge1xyXG4gICAgJCgnI1BheXJvbGxzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGZuLlNlYXJjaExpc3RQYXlyb2xsUHJvY2VzcygkKHRoaXMpLnZhbCgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNEZXBhcnRtZW50Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGZuLlNlYXJjaExpc3RFbXBsb3llZWZvckRlcGFydG1lbnQoJCh0aGlzKS52YWwoKS50b1N0cmluZygpLCAkKFwiLnBheXJvbGxwcm9jZXNzaWRcIikudmFsKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnBheXJvbGxwcm9jZXNzaWQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgJChcIiNEZXBhcnRtZW50XCIpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgZm4uU2VhcmNoTGlzdEVtcGxveWVlKCQodGhpcykudmFsKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiN1cGRhdGUtcmVwb3J0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhdHlwZSA9ICQodGhpcykuYXR0cihcImRhdGEtdHlwZVwiKTtcclxuICAgICAgICAkKCcucHJvZ3Jlc28nKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcInBheXJvbGwtcGF5bWVudHNcIikge1xyXG4gICAgICAgICAgICB2YXIgZW1wbG95ZWVJZDogc3RyaW5nID0gJCgnLmVtcGxveWVlLWlkLXNlbGVjdCcpLnZhbCgpID09IG51bGwgPyBcIlwiIDogJCgnLmVtcGxveWVlLWlkLXNlbGVjdCcpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvcGFnb3NkZW5vbWluYT9wYXlyb2xscHJvY2Vzc2lkPSR7JChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLnZhbCgpLnRvU3RyaW5nKCl9JmRlcGFybWVudElkPSR7JCgnI0RlcGFydG1lbnQnKS52YWwoKS50b1N0cmluZygpfSZlbXBsb3llZUlkPSR7ZW1wbG95ZWVJZH1gKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RG9tID0gJChyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcpLnJlcGxhY2VXaXRoKCQoJy5jb250LWdlbmVyYWwtcmVwb3J0JywgbmV3RG9tKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNvJykuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNTZW5kRW1haWxSZXBvcnRcIikuc3VibWl0KGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBTaWVtcHJlIHByZXZlbmlyIGVsIGVudsOtbyBuYXRpdm8gZGVsIGZvcm11bGFyaW9cclxuICAgICAgICBpZiAoJCh0aGlzKS52YWxpZCgpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGF0eXBlID0gJChcIiN1cGRhdGUtcmVwb3J0XCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGF0eXBlID09IFwicGF5cm9sbC1wYXltZW50c1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtcGxveWVlSWQ6IHN0cmluZyA9ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKSA9PSBudWxsID8gXCJcIiA6ICQoJy5lbXBsb3llZS1pZC1zZWxlY3QnKS52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8qICAgICAgJCgnLnByb2dyZXNvJykubW9kYWwoeyBiYWNrZHJvcDogJ3N0YXRpYycsIGtleWJvYXJkOiBmYWxzZSB9KSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgL3JlcG9ydGVzL2VtYWlsL3BhZ29zZGVub21pbmE/cGF5cm9sbHByb2Nlc3NpZD0keyQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS52YWwoKS50b1N0cmluZygpfSZkZXBhcm1lbnRJZD0keyQoJyNEZXBhcnRtZW50JykudmFsKCkudG9TdHJpbmcoKX0mZW1wbG95ZWVJZD0ke2VtcGxveWVlSWR9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICQoXCIjU2VuZEVtYWlsUmVwb3J0XCIpLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGE6IFJlc3BvbnNlVUkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLlR5cGUgPT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAkKCcucHJvZ3Jlc28nKS5tb2RhbCgnaGlkZScpOyovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybWF0RXJyb3JzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiQoJy5wcm9ncmVzbycpLm1vZGFsKCdoaWRlJyk7Ki9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWNjaW9uYXJhbExvZ2luKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJyZXBvcnQtYWxsLWVtcGxveWVlXCIpIHtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy9yZXBvcnRlZW1wbGVhZG9zP2RlcGFybWVudElkPSR7JCgnI0RlcGFydG1lbnQnKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJwYXlyb2xsLXBheW1lbnRzLXN1bW1hcnlcIikge1xyXG4gICAgICAgICAgICAkLmdldChgL3JlcG9ydGVzL3Jlc3VtZW5wYWdvc2Rlbm9taW5hP3BheXJvbGxwcm9jZXNzaWQ9JHskKFwiLnBheXJvbGxwcm9jZXNzaWRcIikudmFsKCkudG9TdHJpbmcoKX0mZGVwYXJtZW50SWQ9JHskKCcjRGVwYXJ0bWVudCcpLnZhbCgpLnRvU3RyaW5nKCl9YClcclxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RvbSA9ICQocik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnKS5yZXBsYWNlV2l0aCgkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcsIG5ld0RvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzbycpLmFkZENsYXNzKFwiY29sbGFwc2VcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJwYXlyb2xsLXJlcG9ydFwiKSB7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvcmVwb3J0ZW5vbWluYT9wYXlyb2xscHJvY2Vzc2lkPSR7JChcIi5wYXlyb2xscHJvY2Vzc2lkXCIpLnZhbCgpLnRvU3RyaW5nKCl9JmRlcGFybWVudElkPSR7JCgnI0RlcGFydG1lbnQnKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcInRzcy1yZXBvcnRcIikge1xyXG4gICAgICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJChcIi50eXBlLXRzc1wiKS52YWwoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy90c3M/cGF5cm9sbGlkPSR7JChcIiNQYXlyb2xsc1wiKS52YWwoKS50b1N0cmluZygpfSZ5ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfSZ0eXBldHNzPSR7JChcIi50eXBlLXRzc1wiKS52YWwoKS50b1N0cmluZygpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDQtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0ND95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJkZ3QyLXJlcG9ydFwiKSB7XHJcbiAgICAgICAgICAgIGxldCBwZXJpb2QgPSAkKFwiLnBlcmlvZFwiKS52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAkLmdldChgL3JlcG9ydGVzL2RndDI/eWVhcj0ke3BlcmlvZC5zdWJzdHIoMCwgNCl9Jm1vbnRoPSR7cGVyaW9kLnN1YnN0cig1LCAyKX1gKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RG9tID0gJChyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY29udC1nZW5lcmFsLXJlcG9ydCcpLnJlcGxhY2VXaXRoKCQoJy5jb250LWdlbmVyYWwtcmVwb3J0JywgbmV3RG9tKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNvJykuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDMtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0Mz95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDUtcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0NT95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhdHlwZSA9PSBcImRndDktcmVwb3J0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHBlcmlvZCA9ICQoXCIucGVyaW9kXCIpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KGAvcmVwb3J0ZXMvZGd0OT95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoZGF0YXR5cGUgPT0gXCJkZ3QxMi1yZXBvcnRcIikge1xyXG4gICAgICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgJC5nZXQoYC9yZXBvcnRlcy9kZ3QxMj95ZWFyPSR7cGVyaW9kLnN1YnN0cigwLCA0KX0mbW9udGg9JHtwZXJpb2Quc3Vic3RyKDUsIDIpfWApXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEb20gPSAkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250LWdlbmVyYWwtcmVwb3J0JykucmVwbGFjZVdpdGgoJCgnLmNvbnQtZ2VuZXJhbC1yZXBvcnQnLCBuZXdEb20pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc28nKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5nZW5lcmFyLXR4dFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgcGVyaW9kID0gJChcIi5wZXJpb2RcIikudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgcGF5cm9sbGlkID0gJChcIiNQYXlyb2xsc1wiKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKCQoJy5wZXJpb2QnKS52YWwoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXlyb2xsaWQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oYC9yZXBvcnRlcy9UeHQ/eWVhcj0ke3BlcmlvZC5zdWJzdHIoMCwgNCl9Jm1vbnRoPSR7cGVyaW9kLnN1YnN0cig1LCAyKX0mdHlwZURURz0keyQoJy5UeXBlLWRndCcpLnZhbCgpLnRvU3RyaW5nKCl9YCwgJ19ibGFuaycpXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGAvcmVwb3J0ZXMvVHh0P3llYXI9JHtwZXJpb2Quc3Vic3RyKDAsIDQpfSZtb250aD0ke3BlcmlvZC5zdWJzdHIoNSwgMil9JnR5cGVEVEc9JHskKCcuVHlwZS1kZ3QnKS52YWwoKS50b1N0cmluZygpfSZwYXlyb2xsaWQ9JHtwYXlyb2xsaWQudG9TdHJpbmcoKX0mdHlwZXRzcz0keyQoXCIudHlwZS10c3NcIikudmFsKCkudG9TdHJpbmcoKX1gLCAnX2JsYW5rJylcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93c19tZXNzYWdlKFwiwqFEZWJlIHNlbGVjY2lvbmFyIHVuIHBlcsOtb2RvIVwiLCBcImVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vZXhwb3J0YXIgYSBleGNlbFxyXG4gICAgJCgnLmV4cG9ydGFyRXhjZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93Lm9wZW4oYC9yZXBvcnRlcy9FeHBvcnRhclBheXJvbGw/cGF5cm9sbHByb2Nlc3NpZD0keyQoXCIucGF5cm9sbHByb2Nlc3NpZFwiKS52YWwoKS50b1N0cmluZygpfSZkZXBhcm1lbnRJZD0keyQoJyNEZXBhcnRtZW50JykudmFsKCkudG9TdHJpbmcoKX1gLCAnX2JsYW5rJyk7XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IH0iXX0=